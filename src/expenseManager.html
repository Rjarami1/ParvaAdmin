<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gesti贸n de Gastos</title>
</head>
<body>
    <h1>Gesti贸n de Gastos</h1>

    <h2>Crear Tipo:</h2><br>
    <label for="newType">Descripci贸n:</label>&nbsp;&nbsp;
    <input type="text" name="newType" id="newType">

    <h2>Tipos y C贸digos Existentes:</h2><br>

    <ul id="exp_list">

    </ul>

    <script>
        window.$ = window.jQuery = require('jquery');
        const {ipcRenderer} = require('electron');

        $(document).ready(function (){
            ipcRenderer.send('expenseManager:ready');
        })

        let exp_types;
        let exp_codes;
        ipcRenderer.on('expenseManager:info', (e,arr) => {
            exp_types = arr[0];
            exp_codes = arr[1];

            let ul_id;
            let li_id;
            exp_types.forEach(exp_type => {
                ul_id = `list_${exp_type.type_id}`;
                li_id = `type_${exp_type.type_id}`
                $('#exp_list').append(`<li id="${li_id}">${exp_type.type_description.trim()}<ul id="${ul_id}"></ul></li>`);
                
                exp_codes.forEach(exp_code => {
                    if(exp_code.expense_type_id == exp_type.type_id){
                        $(`#${ul_id}`).append(`<li code_${exp_code.code_id}>${exp_code.expense_code.trim()} - ${exp_code.code_description}</li>`);
                    }
                });

                $(`#${ul_id}`).hide();

                $(`#${li_id}`).click(function(){
                    $(`#${ul_id}`).toggle();
                })
                
            });

        })
    </script>
</body>
</html>